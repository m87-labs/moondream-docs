# Visual Question Answering

import { Callout } from 'nextra/components'
import { Steps } from 'nextra/components'
import { Tabs } from 'nextra/components'

<Callout type="info">
  Visual Question Answering (VQA) allows you to ask natural language questions about images and receive detailed answers.
</Callout>

## Overview

Moondream's VQA capability enables you to:
- Ask open-ended questions about image content
- Get detailed, context-aware responses
- Handle complex visual reasoning tasks
- Stream responses for better UX

## Interactive Demo

<iframe 
  src="https://moondream.ai/playground?feature=vqa" 
  width="100%" 
  height="600px" 
  frameBorder="0"
  style={{ borderRadius: '8px', boxShadow: '0 4px 6px -1px rgb(0 0 0 / 0.1)' }}
/>

## Implementation Guide

<Steps>
### 1. Initialize the API Client
<Tabs items={['Python', 'JavaScript', 'TypeScript']}>
  <Tabs.Tab>
    ```python
    from moondream import MoondreamAPI
    
    api = MoondreamAPI()
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```javascript
    import { MoondreamAPI } from 'moondream';
    
    const api = new MoondreamAPI();
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```typescript
    import { MoondreamAPI } from 'moondream';
    
    const api = new MoondreamAPI();
    ```
  </Tabs.Tab>
</Tabs>

### 2. Prepare Your Request
<Tabs items={['Python', 'JavaScript', 'TypeScript']}>
  <Tabs.Tab>
    ```python
    request = VqaRequest(
        image_url="https://example.com/image.jpg",
        question="What is the main subject of this image?",
        stream=True  # Optional streaming
    )
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```javascript
    const request = {
      imageUrl: "https://example.com/image.jpg",
      question: "What is the main subject of this image?",
      stream: true  // Optional streaming
    };
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```typescript
    const request: VqaRequest = {
      imageUrl: "https://example.com/image.jpg",
      question: "What is the main subject of this image?",
      stream: true  // Optional streaming
    };
    ```
  </Tabs.Tab>
</Tabs>

### 3. Make the API Call
<Tabs items={['Python', 'JavaScript', 'TypeScript']}>
  <Tabs.Tab>
    ```python
    # Single response
    response = await api.ask_question(
        image_url="https://example.com/image.jpg",
        question="What's in the image?"
    )
    print(response.result)

    # Streaming response
    async for chunk in api.ask_question(
        image_url="https://example.com/image.jpg",
        question="What's in the image?",
        stream=True
    ):
        if chunk['completed']:
            print("\nDone!")
        else:
            print(chunk['chunk'], end='')
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```javascript
    // Single response
    const response = await api.askQuestion({
      imageUrl: "https://example.com/image.jpg",
      question: "What's in the image?"
    });
    console.log(response.result);

    // Streaming response
    for await (const chunk of api.askQuestion({
      imageUrl: "https://example.com/image.jpg",
      question: "What's in the image?",
      stream: true
    })) {
      if (chunk.completed) {
        console.log("\nDone!");
      } else {
        process.stdout.write(chunk.chunk);
      }
    }
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```typescript
    // Single response
    const response = await api.askQuestion({
      imageUrl: "https://example.com/image.jpg",
      question: "What's in the image?"
    });
    console.log(response.result);

    // Streaming response
    for await (const chunk of api.askQuestion({
      imageUrl: "https://example.com/image.jpg",
      question: "What's in the image?",
      stream: true
    })) {
      if (chunk.completed) {
        console.log("\nDone!");
      } else {
        process.stdout.write(chunk.chunk);
      }
    }
    ```
  </Tabs.Tab>
</Tabs>
</Steps>

## Best Practices

<Callout type="warning">
  Keep questions clear and specific for better results. Avoid overly complex or compound questions.
</Callout>

- Frame questions naturally and conversationally
- Include specific details you want to know about
- Consider using streaming for longer responses
- Handle errors gracefully

## Example Use Cases

1. **Content Analysis**
   - Identifying objects and their relationships
   - Understanding scene composition
   - Analyzing visual attributes

2. **Accessibility Applications**
   - Providing image descriptions for visually impaired users
   - Extracting text from images
   - Understanding spatial relationships

3. **Educational Tools**
   - Interactive learning experiences
   - Visual comprehension exercises
   - Educational content verification

## Error Handling

<Tabs items={['Python', 'JavaScript', 'TypeScript']}>
  <Tabs.Tab>
    ```python
    try:
        response = await api.ask_question(
            image_url="https://example.com/image.jpg",
            question="What's in the image?"
        )
    except InvalidImageError:
        print("Invalid image URL or format")
    except APIError as e:
        print(f"API error: {str(e)}")
    except Exception as e:
        print(f"Unexpected error: {str(e)}")
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```javascript
    try {
      const response = await api.askQuestion({
        imageUrl: "https://example.com/image.jpg",
        question: "What's in the image?"
      });
    } catch (error) {
      if (error instanceof InvalidImageError) {
        console.error("Invalid image URL or format");
      } else if (error instanceof APIError) {
        console.error(`API error: ${error.message}`);
      } else {
        console.error(`Unexpected error: ${error.message}`);
      }
    }
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```typescript
    try {
      const response = await api.askQuestion({
        imageUrl: "https://example.com/image.jpg",
        question: "What's in the image?"
      });
    } catch (error) {
      if (error instanceof InvalidImageError) {
        console.error("Invalid image URL or format");
      } else if (error instanceof APIError) {
        console.error(`API error: ${error.message}`);
      } else {
        console.error(`Unexpected error: ${error.message}`);
      }
    }
    ```
  </Tabs.Tab>
</Tabs>

## Related Resources

- [Getting Started Guide](/docs/getting-started)
- [API Reference](/docs/api-reference)
- [Example Projects](/docs/examples) 